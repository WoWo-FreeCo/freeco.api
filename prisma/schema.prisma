// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model UserDailyCheck {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now()) @db.Timestamp(0)
  user      User     @relation(fields: [userId], references: [id])
  userId    String   @unique @db.VarChar(36)

  @@index([createdAt])
}

model UserRecord {
  reward Int
  user   User   @relation(fields: [userId], references: [id])
  userId String @unique @db.VarChar(36)
}

model UserActivity {
  isAddedYTChannel  Boolean @default(false)
  isAddedFBFanGroup Boolean @default(false)
  user              User    @relation(fields: [userId], references: [id])
  userId            String  @unique @db.VarChar(36)
}

model UserAddress {
  id        Int     @id @default(autoincrement())
  address   String
  telephone String? @db.VarChar(15)
  user      User    @relation(fields: [userId], references: [id])
  userId    String  @unique @db.VarChar(36)
}

model User {
  id                String           @id @default(uuid()) @db.VarChar(36)
  email             String           @unique
  password          String
  nickname          String?
  cellphone         String           @db.VarChar(15)
  telephone         String?          @db.VarChar(15)
  unifiedBusinessNo String?          @db.VarChar(18)
  record            UserRecord?
  activity          UserActivity?
  addresses         UserAddress[]
  dailyChecks       UserDailyCheck[]
  createdAt         DateTime         @default(now()) @db.Timestamp(0)
  updatedAt         DateTime         @updatedAt @db.Timestamp(0)

  @@index([cellphone])
  @@index([email])
}
